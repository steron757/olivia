<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="product">

	<resultMap id="ProductMap" class="com.olivia.model.Product">
		<result property="id" column="id" jdbcType="VARCHAR" />
		<result property="title" column="title" jdbcType="VARCHAR" />
		<result property="introduction" column="introduction" jdbcType="VARCHAR" />
		<result property="cover" column="cover" jdbcType="VARCHAR" />
		<result property="createDate" column="create_date" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap id="ImageMap" class="com.olivia.model.Image">
		<result property="id" column="id" jdbcType="VARCHAR" />
		<result property="productId" column="product_id" jdbcType="VARCHAR" />
		<result property="briefDescription" column="brief_description" jdbcType="VARCHAR" />
		<result property="description" column="description" jdbcType="VARCHAR" />
		<result property="path" column="path" jdbcType="VARCHAR" />
	</resultMap>
	
	<select id="getProducts" resultMap="ProductMap">
		SELECT ID,TITLE,INTRODUCTION,COVER,CREATE_DATE FROM T_PRODUCT ORDER BY ID DESC
	</select>
	
	<select id="getImages" resultMap="ImageMap" parameterClass="java.lang.String">
		SELECT T.ID,T.PRODUCT_ID,T.BRIEF_DESCRIPTION,T.DESCRIPTION,T.PATH 
			FROM t_image T WHERE T.PRODUCT_ID = #productid:VARCHAR#
	</select>
</sqlMap>